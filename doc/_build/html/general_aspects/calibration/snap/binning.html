
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>A note on data binning… &#8212; Powder Diffraction at ORNL</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=44323870" />
    <link rel="stylesheet" type="text/css" href="../../../_static/.ipynb_checkpoints/custom-checkpoint.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-TFL7TZY8LR"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TFL7TZY8LR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TFL7TZY8LR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'general_aspects/calibration/snap/binning';</script>
    <script data-website-id="3fc28470-259d-4b4f-bf0c-d4635edb6515" src="https://umm.iris-home.net/script.js"></script>
    <link rel="canonical" href="https://powder.ornl.gov/general_aspects/calibration/snap/binning.html" />
    <link rel="icon" href="../../../_static/powder_fav.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Diffraction Calibration" href="diffCalib/toc.html" />
    <link rel="prev" title="Core Concepts" href="coreConcepts.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/ornl_logo.png" class="logo__image only-light" alt="Powder Diffraction at ORNL - Home"/>
    <script>document.write(`<img src="../../../_static/ornl_logo.png" class="logo__image only-dark" alt="Powder Diffraction at ORNL - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../about_this_book.html">About this book</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../get_in_touch.html">Get in touch</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">General Topics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../nsources.html">Neutron Sources</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../toc.html">Calibration of Instruments</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../pd_calib_principles.html">Principles</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../SNAP_calibration.html">SNAP | BL-3 | SNS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="coreConcepts.html">Core Concepts</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">A note on data binning…</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="diffCalib/toc.html">Diffraction Calibration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="diffCalib/overview.html">Diffraction Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="diffCalib/diffCal_assessment_output.html">Calibration assessment, completion and output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="normCalib/overview.html">Normalisation Calibration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../instrument_files.html">Instrument Calibration Files</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../data_acquire/toc.html">Data Acquisition</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../data_acquire/monitor.html">Data Monitor</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../catalogue/toc.html">Data Catalog</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../catalogue/oncat.html">ONCAT Catalog</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../mantid/toc.html">Mantid</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mantid/configuration.html">Mantid Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tools_utils/toc.html">Tools and Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools_utils/python_venv.html">Python &amp; Virtual Environment</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bragg Diffraction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../bragg_diffraction/intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/toc.html">Data Reduction</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/hb2a.html">POWDER | HB-2A | HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/hb2c.html">WAND² | HB-2C | HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/nomad.html">NOMAD | BL-1B | SNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/powgen.html">POWGEN | BL-11A | SNS</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap.html">SNAP | BL-3 | SNS</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/maskUtils.html">maskUtils</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/maskUtils/swissCheese.html"><code class="docutils literal notranslate"><span class="pre">swissCheese</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils.html">utils</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/file.html"><code class="docutils literal notranslate"><span class="pre">file</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/autoMask.html"><code class="docutils literal notranslate"><span class="pre">autoMask</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/propagateDifcal.html"><code class="docutils literal notranslate"><span class="pre">propagateDifcal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/indexStates.html"><code class="docutils literal notranslate"><span class="pre">indexStates</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/reduce.html"><code class="docutils literal notranslate"><span class="pre">reduce</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/reload.html"><code class="docutils literal notranslate"><span class="pre">reload</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/workspaceHandles.html"><code class="docutils literal notranslate"><span class="pre">workspaceHandles</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/exportData.html"><code class="docutils literal notranslate"><span class="pre">exportData</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/utils/confirmIPTS.html"><code class="docutils literal notranslate"><span class="pre">confirmIPTS</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr.html">snapStateMgr</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/stateDef.html"><code class="docutils literal notranslate"><span class="pre">stateDef</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/availableStates.html"><code class="docutils literal notranslate"><span class="pre">availableStates</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/createState.html"><code class="docutils literal notranslate"><span class="pre">createState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/autoStateName.html"><code class="docutils literal notranslate"><span class="pre">autoStateName</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/checkCalibrationStatus.html"><code class="docutils literal notranslate"><span class="pre">checkCalibrationStatus</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/checkStateExists.html"><code class="docutils literal notranslate"><span class="pre">checkStateExists</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/isCalibrated.html"><code class="docutils literal notranslate"><span class="pre">isCalibrated</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/printCalibrationHome.html"><code class="docutils literal notranslate"><span class="pre">printCalibrationHome</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../bragg_diffraction/data_reduction/snap/snapStateMgr/pullStateDict.html"><code class="docutils literal notranslate"><span class="pre">pullStateDict</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../bragg_diffraction/data_analysis/toc.html">Data Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_analysis/software.html">Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bragg_diffraction/data_analysis/tutorials.html">Tutorials &amp; Workshops</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Total Scattering</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../total_scattering/intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../total_scattering/data_reduction/toc.html">Data Reduction</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../total_scattering/data_reduction/princple_implementation.html">Principle &amp; Implementation</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../total_scattering/data_reduction/mts_flow.html">MTS workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../total_scattering/data_reduction/mts_abs_ms.html">Absorption and Multiple Scattering Correction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_reduction/dr_howto.html">Data Reduction How-to</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_reduction/ts_powgen.html">For POWGEN Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_reduction/mts_doc.html">MTS Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_reduction/ts_pp.html">Post-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_reduction/ts_dp_workshops.html">Data Processing Workshops</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../total_scattering/data_analysis/toc.html">Data Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../total_scattering/data_analysis/software.html">Software</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Auto Reduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../auto_reduce/hb2a_auto.html">POWDER | HB-2A | HFIR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_reduce/hb2c_auto.html">WAND² | HB-2C | HFIR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_reduce/nomad_auto.html">NOMAD | BL-1B | SNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_reduce/powgen_auto.html">POWGEN | BL-11A | SNS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Toolbox</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/nomad.html">NOMAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/powgen.html">POWGEN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/hb2a.html">HB-2A (POWDER)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/hb2c.html">HB-2C (WAND^2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/general.html">General Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_tools/services.html">System Services</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">More</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../uptime.html">Services Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../addie.html">ADDIE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../powder_forum.html">Discussion Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../run_time.html">Data reduction running time</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../work_items/toc.html">Powder Diffraction Work Items</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../work_items/roadmap.html">Roadmap</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../../work_items/software_and_projects.html">Community Software and Projects</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../collections/toc.html">Powder Diffraction Collections</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../collections/local_envs.html">Local Dev &amp; Test Setups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../collections/mts_for_developers.html">MTS Collections for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../collections/mobile_apps.html">Mobile Apps for SNS &amp; HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../collections/pd_software_tests.html">PD Software Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../bib.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../follow.html">Follow Us</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd/edit/main/doc/general_aspects/calibration/snap/binning.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd/issues/new?title=Issue%20on%20page%20%2Fgeneral_aspects/calibration/snap/binning.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/general_aspects/calibration/snap/binning.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>A note on data binning…</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logarithmic-binning">Logarithmic binning</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choice-of-binning-parameter-delta-x-i">Choice of binning parameter <span class="math notranslate nohighlight">\(\Delta X_i\)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conversion-to-momentum-transfer">Conversion to momentum transfer</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="a-note-on-data-binning">
<h1>A note on data binning…<a class="headerlink" href="#a-note-on-data-binning" title="Link to this heading">#</a></h1>
<section id="logarithmic-binning">
<h2>Logarithmic binning<a class="headerlink" href="#logarithmic-binning" title="Link to this heading">#</a></h2>
<p>The diffraction resolution of a Time-of-flight diffractometer is typically complex and depends on multiple instrument characteristics (including moderator design, flight path, beam divergence pixel size etc.) in addition to geometric factors such as scattering angle. For powder Bragg diffraction a key consideration is the uncertainty of the d-spacing of a peak <span class="math notranslate nohighlight">\(\delta d\)</span>, which manifests as the Bragg peak width and, in general, the peak profile (and leads to the well-known assymetriy of TOF Bragg peaks). By using the de Broglie relation to equate wavelength to neutron momentum and substituting this into Bragg’s law, we can express d-spacing in terms of the time-of-flight measurement. Differentiating with respect to these measurement variables allows us to estimate <span class="math notranslate nohighlight">\(\delta d\)</span> as shown by Worlton et al <span id="id1">[<a class="reference internal" href="../../../bib.html#id19" title="T.G. Worlton, J.D. Jorgensen, R.A. Beyerlein, and D.L. Decker. Multicomponent profile refinement of time-of-flight neutron diffraction data. Nuclear Instruments and Methods, 137(2):331-337, 1976. URL: https://www.sciencedirect.com/science/article/pii/0029554X7690344X, doi:https://doi.org/10.1016/0029-554X(76)90344-X.">Worlton <em>et al.</em>, 1976</a>]</span>:</p>
<p><span class="math notranslate nohighlight">\(\frac{\delta d}{d} = \sqrt{[\delta \theta ^2 cot ^2 \theta + (\frac{\delta T}{T})^2 + (\frac{\delta L}{L})^2}\)</span> - (0)</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\delta \theta\)</span> is the total uncertainty of scattering angle (a combination of beam divergence convolved with sample size and pixel angular acceptance). Details of neutron guides can lead to a wavelength dependence of divergence, however, this can often be neglected.</p></li>
<li><p><span class="math notranslate nohighlight">\(\theta\)</span> is the scattering angle (i.e. half od <span class="math notranslate nohighlight">\(2\theta\)</span>)</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta L\)</span> is the total flight uncertainty, since this is small relative to L, thd entire <span class="math notranslate nohighlight">\(\frac{\delta L}{L}\)</span> term can often be neglected.</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta T\)</span> the total uncertainty in time-of-flight T. An important contribution to this uncertainty is the source pulse width. This latter depends on details of the moderator but if often found to be linearly dependent on wavelength, and therefore time-of-flight, meaning <span class="math notranslate nohighlight">\(\frac{\delta T}{T}\)</span> can be taken as a constant</p></li>
</ul>
<p>Under these assumptions, it can be seen that - for diffraction measured by a detector at fixed angle - <span class="math notranslate nohighlight">\(\frac{\delta d}{d}\)</span> is a constant. Or, in other words, the Bragg peaks will sharpen at a linear rate as d-spacing decreases. It is important that when neutron events are sampled as a function of time-of-flight that the sampling frequency should also linearly increase as d-spacing. This manifests in the choice of histogram bin sizes ,which would ideally be linearly proportional to d-spacing.</p>
<p>In logarithmic binning, the histogram bin edges are generated recursively with successive edges relating to the preceding edge via:</p>
<p><span class="math notranslate nohighlight">\(x_{j+1} = x_j(1+\Delta X_i)\)</span> - (1)</p>
<p>Where the unitless parameters <span class="math notranslate nohighlight">\(\Delta X_i\)</span> are constant for a given spectrum, <span class="math notranslate nohighlight">\(i\)</span> and will be referred to as the logarithmic binning parameter.</p>
<p>From (1) we can <span class="math notranslate nohighlight">\(n^{th}\)</span> bin edge can be determined from the first bin edge <span class="math notranslate nohighlight">\(x_0\)</span> via:</p>
<p><span class="math notranslate nohighlight">\(x_{n} = x_0(1+\Delta X_i)^n\)</span> - (2)</p>
<p>And that the bin width of the <span class="math notranslate nohighlight">\(n^{th}\)</span> bin, <span class="math notranslate nohighlight">\(w_n = x_{n+1} - x_n\)</span> will be:</p>
<p><span class="math notranslate nohighlight">\(w_n = x_0 \Delta X_i (1+\Delta X_i)^n\)</span> - (3)</p>
<p>The ratio of (3) over (2) shows that, for this binning scheme,</p>
<p><span class="math notranslate nohighlight">\(\frac{w_n}{x_n} = \Delta X_i\)</span> - (4)</p>
<p>which is a constant, hence logarithmic binning has the desired property bin widths being linearly proportionaly to x-value. All data reduced by SNAPRed will use logarithmic binning.</p>
</section>
<section id="choice-of-binning-parameter-delta-x-i">
<h2>Choice of binning parameter <span class="math notranslate nohighlight">\(\Delta X_i\)</span><a class="headerlink" href="#choice-of-binning-parameter-delta-x-i" title="Link to this heading">#</a></h2>
<p>Ultimately, all analysis of powder Bragg intensities is via some kind of peak-fitting approach, typically using Rietveld refinement. Consequently, the sampling rate of a given Bragg peak (i.e. the number of measurements across its extent) must consider the peak model that will be deployed. These models can be complicated, particularly for TOF diffraction peaks (The commonly used “TOF profile function 3” in the GSAS refinement package <span id="id2">[<a class="reference internal" href="../../../bib.html#id18" title="A.C. Larson and R.B. Von Dreele. GSAS General Structure Analysis System. Los Alamos National Laboratory Report LAUR 86-748, 2004.">Larson and Dreele, 2004</a>]</span> has up to 21 potential coefficients). The sampling density can be quantified by defining the quantity <span class="math notranslate nohighlight">\(N_{FWHM}\)</span> to be the number of histogram bins across a given peak’s Full Width Half Maximum <span class="math notranslate nohighlight">\(F\)</span>. Correspondingly, in spectrum <span class="math notranslate nohighlight">\(i\)</span>, for a Bragg peak centred on <span class="math notranslate nohighlight">\(d_n\)</span>, we need a bin width <span class="math notranslate nohighlight">\(w_n\)</span> given by:</p>
<p><span class="math notranslate nohighlight">\(w_n=\frac{F_n}{N_{FWHM}}=\Delta X_i d_n\)</span></p>
<p>where we’ve replaced <span class="math notranslate nohighlight">\(x\)</span> with <span class="math notranslate nohighlight">\(d\)</span> as the units will be in d-spacing (but keep the log binning param as <span class="math notranslate nohighlight">\(X\)</span> as it is dimensionless). We can then rearrange to give:</p>
<p><span class="math notranslate nohighlight">\(\Delta X_i = \frac{F_n}{N_nd_n}\)</span></p>
<p>If we estimate the resolution of our spectrum by fitting a Gaussian peak shape to Bragg peaks observed from a ideal, strain-free cpeak profile calibrant (such as NIST silicon (640d) powder) we can calculate the FWHM as <span class="math notranslate nohighlight">\(F_n=2\sqrt{2ln2}\sigma\)</span> where <span class="math notranslate nohighlight">\(\sigma\)</span> is the variance of the Gaussian and taking <span class="math notranslate nohighlight">\(d_n\)</span> as its position. Since <span class="math notranslate nohighlight">\(\frac{\delta d_n}{d}\)</span> is a constant, this will apply to the entire spectrum.</p>
<p>Using this approach, SNAPRed determines the log binning parameter by first modelling the instrument resolution - using empirically determined parameters for the resolution Equation (0) at the individual pixel level. It then assesses, according to a chosen pixel scheme, the average value of <span class="math notranslate nohighlight">\(\frac{\delta d}{d}\)</span> for a given pixel group and determines <span class="math notranslate nohighlight">\(\Delta X_i\)</span> using a fixed value of <span class="math notranslate nohighlight">\(N_{FWHM}\)</span> ensuring that all Bragg peaks, irrespective of their d-spacing or how pixels are combined are equivalently sampled.</p>
<section id="conversion-to-momentum-transfer">
<h3>Conversion to momentum transfer<a class="headerlink" href="#conversion-to-momentum-transfer" title="Link to this heading">#</a></h3>
<p>When conducting analysis of SNAP data using the pair-distribution function approach, it is common to convert reduced data from units of d-spacing, d (Å) to units of momemtum transfer, Q (Å<span class="math notranslate nohighlight">\(^{-1}\)</span>). These quantities are inversely related via the relation <span class="math notranslate nohighlight">\(Q = \frac{2\pi}{d}\)</span>. Thus, if the original x-array containing N histogram bin edges is:</p>
<p><span class="math notranslate nohighlight">\(\mathbf{d} = [d_0,d_1,d_2,...d_N]\)</span></p>
<p>the transformation will generate a new x-array</p>
<p><span class="math notranslate nohighlight">\(\mathbf{q} = [q_0,q_1,q_2,...q_N]\)</span></p>
<p>during conversion (by mantid’s <code class="docutils literal notranslate"><span class="pre">ConvertUnits</span></code>) it is ensured that x-arrays always increase from smallest to largest value. Due to the inverse relation between <span class="math notranslate nohighlight">\(d\)</span> and <span class="math notranslate nohighlight">\(Q\)</span>, this means that</p>
<p><span class="math notranslate nohighlight">\(q_k = \frac{2\pi}{d_N-k}\)</span></p>
<p>The corresponding bin widths can be calculated as</p>
<p><span class="math notranslate nohighlight">\(w^q_k = q_{k+1} - q{k} = \frac{2\pi}{d_{N-k-1}}-\frac{2\pi}{d_{N-k}}\)</span></p>
<p>Substituting expression (2) for <span class="math notranslate nohighlight">\(d\)</span>  and simplifying we can show that</p>
<p><span class="math notranslate nohighlight">\(w^q_k = \frac{2\pi \Delta X}{d_0(1+\Delta X)^{N-k}}\)</span></p>
<p>and</p>
<p><span class="math notranslate nohighlight">\(w^q_k = Q_0\Delta X(1+\Delta X)^k\)</span></p>
<p>showing that the resultant q array is also log-binned with identical binning parameter as the original d-array. Moreover, if we divide equivalent bin widths in the <span class="math notranslate nohighlight">\(q\)</span> and <span class="math notranslate nohighlight">\(d\)</span> arrays:</p>
<p><span class="math notranslate nohighlight">\(\frac{w^q_n}{w_n}=\frac{q_0\Delta d(1+\Delta X)^n}{d_0\Delta d(1+\Delta X)^n}=\frac{q_0}{d_0}=\frac{2\pi}{d_Nd_0}\)</span></p>
<p>we find that these are identical barring multiplication by a factor of <span class="math notranslate nohighlight">\(\frac{2\pi}{d_Nd_0}\)</span>.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "Kvieta1990/ornl-pd",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./general_aspects\calibration\snap"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="coreConcepts.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Core Concepts</p>
      </div>
    </a>
    <a class="right-next"
       href="diffCalib/toc.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Diffraction Calibration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logarithmic-binning">Logarithmic binning</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choice-of-binning-parameter-delta-x-i">Choice of binning parameter <span class="math notranslate nohighlight">\(\Delta X_i\)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conversion-to-momentum-transfer">Conversion to momentum transfer</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yuanpeng Zhang & the Powder Diffraction Group at ORNL
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>