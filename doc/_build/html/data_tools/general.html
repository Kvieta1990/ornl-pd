
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>General Tools &#8212; Powder Diffraction at ORNL</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=44323870" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/custom-checkpoint.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-TFL7TZY8LR"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TFL7TZY8LR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TFL7TZY8LR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data_tools/general';</script>
    <script data-website-id="3fc28470-259d-4b4f-bf0c-d4635edb6515" src="https://umm.iris-home.net/script.js"></script>
    <link rel="canonical" href="https://powder.ornl.gov/data_tools/general.html" />
    <link rel="icon" href="../_static/powder_fav.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="System Services" href="services.html" />
    <link rel="prev" title="HB-2C (WAND^2)" href="hb2c.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ornl_logo.png" class="logo__image only-light" alt="Powder Diffraction at ORNL - Home"/>
    <script>document.write(`<img src="../_static/ornl_logo.png" class="logo__image only-dark" alt="Powder Diffraction at ORNL - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about_this_book.html">About this book</a></li>

<li class="toctree-l1"><a class="reference internal" href="../get_in_touch.html">Get in touch</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">General Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../general_aspects/nsources.html">Neutron Sources</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../general_aspects/calibration/toc.html">Calibration of Instruments</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/calibration/pd_calib_principles.html">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/calibration/instrument_files.html">Instrument Calibration Files</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../general_aspects/data_acquire/toc.html">Data Acquisition</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/data_acquire/monitor.html">Data Monitor</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../general_aspects/catalogue/toc.html">Data Catalog</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/catalogue/oncat.html">ONCAT Catalog</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../general_aspects/mantid/toc.html">Mantid</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/mantid/configuration.html">Mantid Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../general_aspects/tools_utils/toc.html">Tools and Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_aspects/tools_utils/python_venv.html">Python &amp; Virtual Environment</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bragg Diffraction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../bragg_diffraction/intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../bragg_diffraction/data_reduction/toc.html">Data Reduction</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_reduction/hb2a.html">POWDER | HB-2A | HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_reduction/hb2c.html">WAND² | HB-2C | HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_reduction/nomad.html">NOMAD | BL-1B | SNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_reduction/powgen.html">POWGEN | BL-11A | SNS</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../bragg_diffraction/data_analysis/toc.html">Data Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_analysis/software.html">Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bragg_diffraction/data_analysis/tutorials.html">Tutorials &amp; Workshops</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Total Scattering</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../total_scattering/intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../total_scattering/data_reduction/toc.html">Data Reduction</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../total_scattering/data_reduction/princple_implementation.html">Principle &amp; Implementation</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../total_scattering/data_reduction/mts_flow.html">MTS workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../total_scattering/data_reduction/mts_abs_ms.html">Absorption and Multiple Scattering Correction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_reduction/dr_howto.html">Data Reduction How-to</a></li>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_reduction/ts_powgen.html">For POWGEN Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_reduction/mts_doc.html">MTS Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_reduction/ts_pp.html">Post-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_reduction/ts_dp_workshops.html">Data Processing Workshops</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../total_scattering/data_analysis/toc.html">Data Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../total_scattering/data_analysis/software.html">Software</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Auto Reduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../auto_reduce/hb2a_auto.html">POWDER | HB-2A | HFIR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_reduce/hb2c_auto.html">WAND² | HB-2C | HFIR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_reduce/nomad_auto.html">NOMAD | BL-1B | SNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_reduce/powgen_auto.html">POWGEN | BL-11A | SNS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Toolbox</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="nomad.html">NOMAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="powgen.html">POWGEN</a></li>
<li class="toctree-l1"><a class="reference internal" href="hb2a.html">HB-2A (POWDER)</a></li>
<li class="toctree-l1"><a class="reference internal" href="hb2c.html">HB-2C (WAND^2)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">General Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">System Services</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">More</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../uptime.html">Services Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addie.html">ADDIE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powder_forum.html">Discussion Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_time.html">Data reduction running time</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../work_items/toc.html">Powder Diffraction Work Items</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../work_items/roadmap.html">Roadmap</a></li>

<li class="toctree-l2"><a class="reference internal" href="../work_items/software_and_projects.html">Community Software and Projects</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../collections/toc.html">Powder Diffraction Collections</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../collections/local_envs.html">Local Dev &amp; Test Setups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collections/mts_for_developers.html">MTS Collections for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collections/mobile_apps.html">Mobile Apps for SNS &amp; HFIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collections/pd_software_tests.html">PD Software Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bib.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../follow.html">Follow Us</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd/edit/main/doc/data_tools/general.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Kvieta1990/ornl-pd/issues/new?title=Issue%20on%20page%20%2Fdata_tools/general.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/data_tools/general.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>General Tools</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="general-tools">
<h1>General Tools<a class="headerlink" href="#general-tools" title="Link to this heading">#</a></h1>
<ul id="abs-pre-calc">
<li><p><a class="reference internal" href="#abs-pre-calc"><span class="std std-ref">abs_pre_calc</span></a></p>
<p>Routine for the pre-calculation of absorption correction and autoreduction configuration for <code class="docutils literal notranslate"><span class="pre">NOMAD</span></code> and <code class="docutils literal notranslate"><span class="pre">POWGEN</span></code>. For the evaluation of the absorption, once the sample information is ready, it can already be done even before the experiment data are ready. So, the idea here is to use this routine to collect the sample information (via talking to the <code class="docutils literal notranslate"><span class="pre">ITEMS</span></code> database where the sample information will be stored), perform the absorption calculation and cache the result for later reduction use. In the documentation page for <code class="docutils literal notranslate"><span class="pre">NOMAD</span></code> autoreduction, detailed introduction and instructions for the routine are available – see <a class="reference external" href="https://powder.ornl.gov/auto_reduce/nomad_auto.html">here</a>. Regarding the autoreduction setup, we also need to populate the characterization runs information to specify those characterization runs to be used for the reduction, including the empty container run(s), empty instrument run(s), vanadium run(s) and the calibration diamond run. With the current routine, one can do (on Analysis cluster, from the command line),</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>abs_pre_calc<span class="w"> </span>-c
</pre></div>
</div>
<p>to directly open the central characterization table file for editing, skipping the sample information collection and the absorption calculation steps. Or, one can do,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>abs_pre_calc<span class="w"> </span>&lt;instrument_name&gt;<span class="w"> </span>&lt;IPTS&gt;
</pre></div>
</div>
<p>e.g., <code class="docutils literal notranslate"><span class="pre">abs_pre_calc</span> <span class="pre">NOM</span> <span class="pre">28922</span></code>, to run the full process. First, the routine will talk to the <code class="docutils literal notranslate"><span class="pre">ITEMS</span></code> database to fetch the sample information (ID, composition ,etc.). The information will then be populated into a CSV file which will be opened automatically right after the information is collected and populated into the file. Now, at this stage, it is our chance to correct whatever incorrect information there and fill in whatever is missing. Refer to the link <a class="reference external" href="https://powder.ornl.gov/auto_reduce/nomad_auto.html">here</a> for more details. The absorption calculation will be kicked off right next and the calculated absorption spectra will be saved into the experiment-specific directory so that later reduction with <code class="docutils literal notranslate"><span class="pre">MantidTotalScattering</span></code> (MTS) can find and use the cached absorption calculation. In <code class="docutils literal notranslate"><span class="pre">MTS</span></code>, path to the central configuration file containing instrument-specific configurations is hard coded (see the documentation <a class="reference external" href="https://powder.ornl.gov/total_scattering/data_reduction/mts_doc.html#instrument-specific-configs">here</a>). In the central configuration, the absorption save location for the absorption cache files should be specified. In the case for <code class="docutils literal notranslate"><span class="pre">NOMAD</span></code>, it is,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">SNS</span><span class="o">/</span><span class="n">NOM</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">autoreduce</span><span class="o">/</span><span class="n">abs_ms</span>
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">POWGEN</span></code>, it is,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">SNS</span><span class="o">/</span><span class="n">PG3</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">autoreduce</span><span class="o">/</span><span class="n">mts_abs_ms</span>
</pre></div>
</div>
<p>Once the absorption calculation and caching is finished, the program will prompt users with the question whether to bring up the central characterization file for editing. If yes, the characterization file will be brought up and one can fill in the characterization runs as needed.</p>
</li>
</ul>
<ul id="mts">
<li><p><a class="reference internal" href="#mts"><span class="std std-ref">mts</span></a></p>
<p>The local version of <code class="docutils literal notranslate"><span class="pre">MantidTotalScattering</span></code> (MTS) on Analysis. This local version is using the local conda environment under the name of <a class="reference external" href="https://www.ornl.gov/staff-profile/yuanpeng-zhang">Dr. Yuanpeng Zhang</a> on Analysis cluster.</p>
</li>
</ul>
<ul id="mts-data">
<li><p><a class="reference internal" href="#mts-data"><span class="std std-ref">mts_data</span></a></p>
<p>Routine for extracting data from the reduced <span class="math notranslate nohighlight">\(S(Q)\)</span> data from the MTS running. Also, it has the functionality of removing the hydrogen background automatically.</p>
<ul>
<li><p>[Optional] <code class="docutils literal notranslate"><span class="pre">-d</span></code>, followed by a file name to specify the input data file to process, in the NeXus format.</p></li>
<li><p>[Optional] <code class="docutils literal notranslate"><span class="pre">-w</span></code>, followed by an integer number. If the <code class="docutils literal notranslate"><span class="pre">DebugMode</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in <code class="docutils literal notranslate"><span class="pre">MTS</span></code> (see the instructions <a class="reference external" href="https://powder.ornl.gov/total_scattering/data_reduction/mts_doc.html">here</a>), This option can be used to specify the index of the workspace to extract. If not sure about the index, just leave out this option and the program will print out the available options and prompt for the input of the index.</p></li>
<li><p>[Optional] <code class="docutils literal notranslate"><span class="pre">-g</span></code>, followed by an input file name in <code class="docutils literal notranslate"><span class="pre">json</span></code> form, which specifies some further inputs. The flag is for merging multiple banks of reduced data, e.g., from <code class="docutils literal notranslate"><span class="pre">MantidTotalScattering</span></code> reduction, into a single merged data. The provided input file should be like this,</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;MergeParams&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;merge_params.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;S&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;NumBanks&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FileListInput&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;files_to_merge_s.txt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MergeParams</span></code> entry specifies a <code class="docutils literal notranslate"><span class="pre">json</span></code> file containing the parameters for the data merging and the parameter set provided will be applied to all the data to be merged. The list of datasets to be merged are provided with the <code class="docutils literal notranslate"><span class="pre">FileListInput</span></code> entry, and a plain text file should be provided to contain all the datasets to be merged, one dataset in each line. Two modes are available here – the single-file mode and multiple-files mode, as can be specified with the <code class="docutils literal notranslate"><span class="pre">Mode</span></code> entry. <code class="docutils literal notranslate"><span class="pre">S</span></code> or <code class="docutils literal notranslate"><span class="pre">s</span></code> is for the single-file mode while <code class="docutils literal notranslate"><span class="pre">M</span></code> or <code class="docutils literal notranslate"><span class="pre">m</span></code> is for multiple-files mode. For the single-file mode, one is expecting the input dataset in the <code class="docutils literal notranslate"><span class="pre">NeXus</span></code> format. For the multiple-files mode, one is expecting the input dataset in plain text. For the <code class="docutils literal notranslate"><span class="pre">S</span></code> mode, the specification of data files in the file corresponding to the <code class="docutils literal notranslate"><span class="pre">FileListInput</span></code> entry is straightforward – one just puts the <code class="docutils literal notranslate"><span class="pre">NeXus</span></code> file names in each of the lines in the file. The path for each dataset should be specified relative to the current running directory (i.e., where the <code class="docutils literal notranslate"><span class="pre">mts_data</span></code> command will be running). For the <code class="docutils literal notranslate"><span class="pre">M</span></code> mode, a stem name is expected for each dataset and we are expecting the names of the data files are following the standard. For example, if I put in the stem name <code class="docutils literal notranslate"><span class="pre">my_data</span></code> for a dataset, I am expecting the following files to be available,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_data_bank1</span><span class="o">.</span><span class="n">dat</span>
<span class="n">my_data_bank2</span><span class="o">.</span><span class="n">dat</span>
<span class="n">my_data_bank3</span><span class="o">.</span><span class="n">dat</span>
<span class="n">my_data_bank4</span><span class="o">.</span><span class="n">dat</span>
<span class="n">my_data_bank5</span><span class="o">.</span><span class="n">dat</span>
<span class="n">my_data_bank6</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p>The number of expected files is determined by the <code class="docutils literal notranslate"><span class="pre">NumBanks</span></code> entry. Here it should be noted that for the <code class="docutils literal notranslate"><span class="pre">S</span></code> mode, even though we can extract the number of banks from the <code class="docutils literal notranslate"><span class="pre">NeXus</span></code> file, we are not doing that with the <code class="docutils literal notranslate"><span class="pre">-g</span></code> flag, meaning we still need to provide the <code class="docutils literal notranslate"><span class="pre">NumBanks</span></code> entry for the <code class="docutils literal notranslate"><span class="pre">S</span></code> mode. Here below we are attaching a template parameter file (corresponding to the <code class="docutils literal notranslate"><span class="pre">MergeParams</span></code> flag),</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;5&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;40&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Qmin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Qmax&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yoffset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Yscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The merged data file will be saved to the same directory as for each individual dataset, individually, with the name of <code class="docutils literal notranslate"><span class="pre">&lt;STEM&gt;_merged.dat</span></code>. For the <code class="docutils literal notranslate"><span class="pre">S</span></code> mode, <code class="docutils literal notranslate"><span class="pre">&lt;STEM&gt;</span></code> is just the stem name of the corresponding <code class="docutils literal notranslate"><span class="pre">NeXus</span></code> file while for the <code class="docutils literal notranslate"><span class="pre">M</span></code> mode, <code class="docutils literal notranslate"><span class="pre">&lt;STEM&gt;</span></code> refers to the input stem in each of the file provided with the <code class="docutils literal notranslate"><span class="pre">FileListInput</span></code> flag.</p>
</li>
<li><p>[Optional] <code class="docutils literal notranslate"><span class="pre">-b</span></code>, followed by an input JSON file, the details of which will be presented below. Here follows is an example of the input JSON file,</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;InputFile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/SNS/users/y8z/Temp/hydro_bkg_proc/NOM_BaO_HEO.nxs&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;NIterations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;XWindow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;ApplyFilterSG&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;PolyDegree&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;QMin&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.57</span><span class="p">,</span><span class="w"> </span><span class="mf">0.93</span><span class="p">,</span><span class="w"> </span><span class="mf">1.73</span><span class="p">,</span><span class="w"> </span><span class="mf">3.12</span><span class="p">,</span><span class="w"> </span><span class="mf">3.95</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;QMax&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">14.0</span><span class="p">,</span><span class="w"> </span><span class="mf">25.0</span><span class="p">,</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;Cycles&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">InputFile</span></code></p>
<p>To specify the input data file in the NeXus format. This is expected to be the output from <code class="docutils literal notranslate"><span class="pre">MTS</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">NIterations</span></code></p>
<p>In the backend, the Mantid <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/EnggEstimateFocussedBackground-v1.html"><code class="docutils literal notranslate"><span class="pre">EnggEstimateFocussedBackground</span></code></a> is used for estimating the background through the application of a top-hat convolution iteratively. This is followed by a fitting of a polynomial function against the estimated background for smoothing purpose. The current key specifies the number of iterations to be performed for <code class="docutils literal notranslate"><span class="pre">EnggEstimateFocussedBackground</span></code>. Refer to the algorithm documentation <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/EnggEstimateFocussedBackground-v1.html">here</a> for more details.</p>
<blockquote>
<div><p>If a single number is provided as an integer, it will be applied to all the banks. Otherwise, if a list of integer numbers is provided, the length of the list should be equal to the number of banks.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">XWindow</span></code></p>
<p>Extent of the convolution window in the x-axis for all spectra. Refer to the algorithm documentation <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/EnggEstimateFocussedBackground-v1.html">here</a> for more details.</p>
<blockquote>
<div><p>If a single number is provided as an integer, it will be applied to all the banks. Otherwise, if a list of integer numbers is provided, the length of the list should be equal to the number of banks.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ApplyFilterSG</span></code></p>
<p>Apply a Savitzky–Golay filter with a linear polynomial over the same XWindow before the iterative smoothing procedure (recommended for noisy data).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PolyDegree</span></code></p>
<p>The degree of the polynomial to fit the estimated background from <code class="docutils literal notranslate"><span class="pre">EnggEstimateFocussedBackground</span></code>.</p>
<blockquote>
<div><p>The parameter will apply to each of the processing cycles (see the <code class="docutils literal notranslate"><span class="pre">Cycles</span></code> key below). If a single value is given (as an integer), it will be applied to all cycles. Otherwise, the length of the list provided here should not be smaller than the number of cycles for any of the banks.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QMin</span></code></p>
<p>The lower limit in <span class="math notranslate nohighlight">\(Q\)</span>-space for each bank of data to be considered. The available data range in <span class="math notranslate nohighlight">\(Q\)</span>-space for each bank is usually different and beyond the available range, the data could be very noisy or showing strong spikes, which would prevent the background estimation from working properly. Here we can specify the range of data to be considered to suppress the problem.</p>
<blockquote>
<div><p>The length of the list provided here should be equal to the number of banks.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QMax</span></code></p>
<p>The upper limit in <span class="math notranslate nohighlight">\(Q\)</span>-space for each bank of data to be considered. See the details above for the <code class="docutils literal notranslate"><span class="pre">QMin</span></code> key.</p>
<blockquote>
<div><p>The length of the list provided here should be equal to the number of banks.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cycles</span></code></p>
<p>Sometimes, the background estimation plus the polynomial fitting and the background removal process may need to be repeated multiple times before the background can be removed cleanly. This parameter controls the number of such cycles.</p>
<blockquote>
<div><p>If a single number is provided as an integer, it will be applied to all the banks. Otherwise, if a list of integer numbers is provided, the length of the list should be equal to the number of banks, in which case different number of cycles will be applied to different banks of data. As pointed above in the <code class="docutils literal notranslate"><span class="pre">PolyDegree</span></code>, the length of the list provided with <code class="docutils literal notranslate"><span class="pre">PolyDegree</span></code> should not be smaller than the number of cycles for any of the banks.</p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul id="mantidl">
<li><p><a class="reference internal" href="#mantidl"><span class="std std-ref">mantidl</span></a></p>
<p>Run a local version of Mantid Workbench on Analysis. This local version is using the local conda environment under the name of <a class="reference external" href="https://www.ornl.gov/staff-profile/yuanpeng-zhang">Dr. Yuanpeng Zhang</a> on Analysis cluster.</p>
</li>
</ul>
<ul id="pystog-cli">
<li><p><a class="reference internal" href="#pystog-cli"><span class="std std-ref">pystog_cli</span></a></p>
<p>Run a local version of <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> on Analysis. This local version is using the local conda environment under the name of <a class="reference external" href="https://www.ornl.gov/staff-profile/yuanpeng-zhang">Dr. Yuanpeng Zhang</a> on Analysis cluster. Refer to the following links for further information about <code class="docutils literal notranslate"><span class="pre">pystog</span></code>,</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/neutrons/pystog?tab=readme-ov-file">The source code hosted on GitHub</a></p></li>
<li><p><a class="reference external" href="https://pystog.readthedocs.io/en/latest/">The official documentation page for <code class="docutils literal notranslate"><span class="pre">pystog</span></code></a></p></li>
<li><p><a class="reference external" href="https://powder.ornl.gov/total_scattering/data_reduction/ts_pp.html">The web page containing tutorials for <code class="docutils literal notranslate"><span class="pre">pystog</span></code></a></p></li>
</ul>
<p>Running <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> on Analysis without any arguments provided, the help message will be displayed. Usually, the program takes in a JSON file and it will produce files compatible with the <a class="reference external" href="https://rmcprofile.ornl.gov"><code class="docutils literal notranslate"><span class="pre">RMCProfile</span></code></a> program, as originally the <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> program was designed to reproduce the <code class="docutils literal notranslate"><span class="pre">stog</span></code> program that is bundled with the <a class="reference external" href="https://rmcprofile.ornl.gov"><code class="docutils literal notranslate"><span class="pre">RMCProfile</span></code></a> package. One can refer to the links above for detailed information about how to use <code class="docutils literal notranslate"><span class="pre">pystog</span></code> and <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code>.</p>
<div class="admonition-the-ft-flag admonition">
<p class="admonition-title">The ‘-ft’ flag</p>
<p>One thing that is worth mentioning is the extra flag <code class="docutils literal notranslate"><span class="pre">-ft</span></code> that can be provided to <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> – this flag was introduced in the wrapper script that calls <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> so it is not directly available in the underlying <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> routine. What this flag does is to skip the <code class="docutils literal notranslate"><span class="pre">RMCProfile</span></code> part of the data processing. Instead, it will produce pair distribution function (PDF) data in the <code class="docutils literal notranslate"><span class="pre">pdffit</span> <span class="pre">G(r)</span></code> format, while performing the Fourier filter, if specified to. When <code class="docutils literal notranslate"><span class="pre">-ft</span></code> is provided to <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> on Analysis, the wrapper script will read in the provided JSON file (same as the one running <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code> without the <code class="docutils literal notranslate"><span class="pre">-ft</span></code> flag) for necessary parameters regarding the Fourier transform and filter. The output will be saved according to the <code class="docutils literal notranslate"><span class="pre">Outputs</span></code> entry in the JSON file.</p>
</div>
<div class="admonition-about-data-scaling admonition">
<p class="admonition-title">About Data Scaling</p>
<p>With <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code>, one can specify a scale factor for the data rescaling purpose. It should be noticed the difference from the <code class="docutils literal notranslate"><span class="pre">stog_new</span></code> program in the <code class="docutils literal notranslate"><span class="pre">RMCProfile</span></code> package which also has the same parameter. However, in <code class="docutils literal notranslate"><span class="pre">stog_new</span></code>, the scale factor is applied through division, meaning the new data will be <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">=</span> <span class="pre">old</span> <span class="pre">/</span> <span class="pre">scale</span></code>, whereas with <code class="docutils literal notranslate"><span class="pre">pystog_cli</span></code>, the scale factor is applied via muiltiplication, i.e., <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">=</span> <span class="pre">old</span> <span class="pre">*</span> <span class="pre">scale</span></code></p>
</div>
</li>
</ul>
<ul id="pystog-ck">
<li><p><a class="reference internal" href="#pystog-ck"><span class="std std-ref">pystog_ck</span></a></p>
<p>The routine for processing the total scattering data Fourier transform in a chunk-by-chunk manner. The idea is that the main region in <span class="math notranslate nohighlight">\(Q\)</span>-space contributing to different regions in <span class="math notranslate nohighlight">\(r\)</span>-space varies. For example, the main contribution to the high-<span class="math notranslate nohighlight">\(r\)</span> part (e.g., <span class="math notranslate nohighlight">\(&gt; 50\ Å\)</span>) of the signal in real-space would be coming from the very low-<span class="math notranslate nohighlight">\(Q\)</span> region in the reciprocal space. Therefore, while Fourier transforming from the <span class="math notranslate nohighlight">\(Q\)</span>-space to <span class="math notranslate nohighlight">\(r\)</span>-space, one may choose to use just the low-<span class="math notranslate nohighlight">\(Q\)</span> region (e.g., <span class="math notranslate nohighlight">\(&lt; 10.0\ Å^{-1}\)</span>) of the <span class="math notranslate nohighlight">\(Q\)</span>-space data.</p>
<div class="admonition-about-q-range-selection admonition">
<p class="admonition-title">About Q-range selection</p>
<p>Depending on the resolution of the diffractometer, the selection of the lower and upper limit of different <span class="math notranslate nohighlight">\(Q\)</span>-space chunks corresponding to different regions in <span class="math notranslate nohighlight">\(r\)</span>-space will vary. For high-resolution diffractometers like <code class="docutils literal notranslate"><span class="pre">POWGEN</span></code>, sometimes (depending on how significant the thermal motion and distortion are dampening the diffraction signal) diffraction peaks are still distinguishable from noise up to ~<span class="math notranslate nohighlight">\(25\ Å^{-1}\)</span>. In this case, using a smaller upper limit for the <span class="math notranslate nohighlight">\(Q\)</span>-chunk corresponding to the high-<span class="math notranslate nohighlight">\(r\)</span> region in real-space will suppress the real diffraction peaks and we will have the data ‘over-corrected’.</p>
</div>
<p>For sure, using such a narrow <span class="math notranslate nohighlight">\(Q\)</span>-space data for the Fourier transform will lead to a significant broadening of the features in the real-space. However, since the features in the very high-<span class="math notranslate nohighlight">\(r\)</span> region is very broad anyhow due to the asymptotically losing of correlations at large distances, the broadeing effect as the result of limited <span class="math notranslate nohighlight">\(Q\)</span>-range being used for the Fourier transform should not seriously matter. The benefit of doing so is obvious – the high frequency component in the high-<span class="math notranslate nohighlight">\(Q\)</span> region of the <span class="math notranslate nohighlight">\(Q\)</span>-space data are all filtered out while performing the inverse Fourier transform for the obtained high-<span class="math notranslate nohighlight">\(r\)</span> part of the real-space data back into the reciprocal-space. Follow the same logic, one can choose a slightly larger <span class="math notranslate nohighlight">\(Q\)</span> range (e.g., <span class="math notranslate nohighlight">\(&lt; 18 Å^{-1}\)</span>) corresponding to a slightly lower range of the real-space signal (e.g., <span class="math notranslate nohighlight">\(6-50 Å\)</span>), and so on. Here down below is the formula summarizing the routine,</p>
<div class="math notranslate nohighlight">
\[S_{ff}(Q) = \sum_i InvFT_{r_i^l}^{r_i^u}\Bigg\{WF_i^r \times \bigg[ FT_{Q_i^l}^{Q_i^u}\Big[WF_i^Q \times S(Q))\Big] \bigg]\Bigg\}
    \]</div>
<p>where <span class="math notranslate nohighlight">\(S(Q)\)</span> refers to the original <span class="math notranslate nohighlight">\(Q\)</span>-space data coming out from the data reduction pipeline. <span class="math notranslate nohighlight">\(S_{ff}(Q)\)</span> refers to the final output <span class="math notranslate nohighlight">\(Q\)</span>-space data after the chunk-by-chunk processing. <span class="math notranslate nohighlight">\([r_i^l, r_i^u]\)</span> and <span class="math notranslate nohighlight">\([Q_i^l, Q_i^u]\)</span> refers to the corresponding chunks in real and reciprocal space for performing the back-and-forth Fourier transform, where <span class="math notranslate nohighlight">\(i\)</span> refers to a specific chunk. <span class="math notranslate nohighlight">\(WF\)</span> refers to the window function that is <span class="math notranslate nohighlight">\(1\)</span> within the chunk in either real or reciprocal space, and <span class="math notranslate nohighlight">\(0\)</span> otherwise. <span class="math notranslate nohighlight">\(FT\)</span> and <span class="math notranslate nohighlight">\(InvFT\)</span> refers to the forward (from <span class="math notranslate nohighlight">\(Q\)</span>-space to <span class="math notranslate nohighlight">\(r\)</span>-space) and inverse (from <span class="math notranslate nohighlight">\(r\)</span>-space to <span class="math notranslate nohighlight">\(Q\)</span>-space) Fourier transform, respectively, with respect to the integration range as specified by the subscript and superscript for each.</p>
<blockquote>
<div><p>The routine I wrote here was initialized by <a class="reference external" href="https://ne.utk.edu/people/eric-oquinn/">Prof. Eric O’Quinn</a> who used to work at ORNL and now is a faculty member of the Department of Nuclear Engineering at University of Tennessee, Knoxville. The main idea was originated from <a class="reference external" href="https://www.ornl.gov/staff-profile/joerg-c-neuefeind">Joerg C Neuefeind</a> working as a neutron scattering scientist on the NOMAD diffratometer at SNS, ORNL.</p>
</div></blockquote>
<p>The routine available on ORNL Analysis cluster takes a JSON file as the input, and here I am presenting a typical example of the input file,</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;file_1.dat&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;file_2.dat&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;NumberDensity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mf">0.0705</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;FaberZiman&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mf">0.15</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;OutputStem&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;out_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;out_2&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;InputForm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;S(Q)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;HeaderLines&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;QMin&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;QBin&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RMax&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RBin&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RMinScaling&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RMaxScaling&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RCutoff&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.64</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;QChunks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">31.4</span><span class="p">,</span><span class="w"> </span><span class="mf">18.37</span><span class="p">,</span><span class="w"> </span><span class="mf">10.5</span><span class="p">,</span><span class="w"> </span><span class="mf">6.9</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;RChunks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">2.58</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">,</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w"> </span><span class="mf">314.0</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;QSpaceOutputForm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FK(Q)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;RSpaceOutputForm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GK(r)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;LowRInspectRegion&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">-2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]],</span>
<span class="w">    </span><span class="nt">&quot;Interactive&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Diagnostic&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;DebugMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Files</span></code></p>
<blockquote>
<div><p>Mandatory</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of strings</p>
</div></blockquote>
<p>A list of files to be processed. It can be a single file or multiple files. No matter which, file(s) should be provided as a list. Files provided should be <span class="math notranslate nohighlight">\(Q\)</span>s-pace total scattering data files in the form of <span class="math notranslate nohighlight">\(S(Q)\)</span> (the normalized one, which goes to <span class="math notranslate nohighlight">\(1\)</span> at high <span class="math notranslate nohighlight">\(Q\)</span>) or <span class="math notranslate nohighlight">\(S(Q) - 1\)</span>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">NumberDensity</span></code></p>
<blockquote>
<div><p>Mandatory</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of numbers</p>
</div></blockquote>
<p>A list of number density values corresponding to the file list provided. If multiple entries in the list, the entries should be corresponding to the entries for <code class="docutils literal notranslate"><span class="pre">Files</span></code> in order, in which case the length should match. If a single entry is in the list here, the value will be applied to all files provided in <code class="docutils literal notranslate"><span class="pre">Files</span></code> list.</p>
<p>The number density will be used for Fourier filter and data format conversion.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">FaberZiman</span></code></p>
<blockquote>
<div><p>Optional. If the form of the real (reciprocal) space output is specified as <code class="docutils literal notranslate"><span class="pre">GK(r)</span></code> (<code class="docutils literal notranslate"><span class="pre">FK(Q)</span></code>), this value is then <code class="docutils literal notranslate"><span class="pre">Mandatory</span></code>.</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of numbers</p>
</div></blockquote>
<p>A list of <code class="docutils literal notranslate"><span class="pre">Faber-Ziman</span></code> coefficients corresponding to the file list provided. If multiple entries in the list, the entries should be corresponding to the entries for <code class="docutils literal notranslate"><span class="pre">Files</span></code> in order, in which case the length should match. If a single entry is in the list here, the value will be applied to all files provided in <code class="docutils literal notranslate"><span class="pre">Files</span></code> list.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Faber-Ziman</span></code> coefficient is defined as <span class="math notranslate nohighlight">\(\sum_{i,j}c_ic_jb_ib_j\)</span> where <span class="math notranslate nohighlight">\(c_i\)</span> and <span class="math notranslate nohighlight">\(c_j\)</span> refers to the concentration of atom type <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span>, respectively. <span class="math notranslate nohighlight">\(b_i\)</span> and <span class="math notranslate nohighlight">\(b_j\)</span> refers to the coherent scattering length of atom type <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span>, respectively. It will be used for conversion of the data into certain forms, e.g., the <span class="math notranslate nohighlight">\(G(r)\)</span> function as defined in <span id="id1">[<a class="reference internal" href="../bib.html#id14" title="David A. Keen. A comparison of various commonly used correlation functions for describing total scattering. Journal of Applied Crystallography, 34(2):172–177, Apr 2001. URL: https://doi.org/10.1107/S0021889800019993, doi:10.1107/S0021889800019993.">Keen, 2001</a>]</span>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutputStem</span></code></p>
<blockquote>
<div><p>Mandatory</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of strings</p>
</div></blockquote>
<p>The output stem name corresponding to each of the files in <code class="docutils literal notranslate"><span class="pre">Files</span></code>. The length of the list here should be consistent with the one for <code class="docutils literal notranslate"><span class="pre">Files</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">InputForm</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">S(Q)</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A string</p>
</div></blockquote>
<p>Specification of the input data form. Acceptable values are <code class="docutils literal notranslate"><span class="pre">S(Q)</span></code> and <code class="docutils literal notranslate"><span class="pre">S(Q)-1</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">HeaderLines</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">2</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: An integer</p>
</div></blockquote>
<p>Specification of the number of header lines in the input data files. Apparently, all the input data files should be consistent in terms of the number of header lines.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QMin</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">0.4</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>Lower boundary in <span class="math notranslate nohighlight">\(Q\)</span>-space for the Fourier transform.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QBin</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">0.01</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>Bin size of the <span class="math notranslate nohighlight">\(Q\)</span>-space data. Internally, the program will check whether the provided data is equally spaced. If not, the data will be rebinned according to the bin size provided here. Or, if the bin size in the provided data is not consistent with the provide bin size, the data will also be rebinned according to the bin size provided here.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RMax</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">50.0</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>The maximum <span class="math notranslate nohighlight">\(r\)</span> value for the output <span class="math notranslate nohighlight">\(r\)</span>-space data produced from the processing.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RBin</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">0.01</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>Bin size of the <span class="math notranslate nohighlight">\(r\)</span>-space output data.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RMinScaling</span></code></p>
<blockquote>
<div><p>Optional. If the value is not given, the program will bring up a low-<span class="math notranslate nohighlight">\(r\)</span> region plot of the <span class="math notranslate nohighlight">\(g(r)-1\)</span> data so that one can decide and input the required value from the command line interfae.</p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>The lower boundary in the low-r region of the real space data for the data scaling. Internally, the prpgram will initially Fourier transform the data into real-space <span class="math notranslate nohighlight">\(g(r) - 1\)</span> form, which should in principle oscillate around <span class="math notranslate nohighlight">\(1\)</span> in the low-r region. Then, an average value in a specified low-<span class="math notranslate nohighlight">\(r\)</span> region will be calculated to give an indicator for how far the data scale is off (by comparing to the level that the data should oscillate around, i.e., <span class="math notranslate nohighlight">\(1\)</span>). Then the <span class="math notranslate nohighlight">\(Q\)</span>-space data will be rescaled according to the scale factor calculated here.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RMaxScaling</span></code></p>
<blockquote>
<div><p>Optional. If the value is not given, the program will bring up a low-<span class="math notranslate nohighlight">\(r\)</span> region plot of the <span class="math notranslate nohighlight">\(g(r)-1\)</span> data so that one can decide and input the required value from the command line interfae.</p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>The lower boundary in the low-r region of the real space data for the data scaling. See the notes for <code class="docutils literal notranslate"><span class="pre">RMinScaling</span></code> presented above.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RCutoff</span></code></p>
<blockquote>
<div><p>Optional. If the value is not given, the program will bring up a low-<span class="math notranslate nohighlight">\(r\)</span> region plot of the <span class="math notranslate nohighlight">\(g(r)-1\)</span> data so that one can decide and input the required value from the command line interfae.</p>
</div></blockquote>
<blockquote>
<div><p>Form: A float</p>
</div></blockquote>
<p>The low-<span class="math notranslate nohighlight">\(r\)</span> cutoff in <span class="math notranslate nohighlight">\(r\)</span>-space for the Fourier filter, i.e., features below this cutoff will be filtered out.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QChunks</span></code></p>
<blockquote>
<div><p>Mandatory</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of numbers</p>
</div></blockquote>
<p>Specification of the <code class="docutils literal notranslate"><span class="pre">Qmax</span></code> to be used for the Fourier transform for each of the <span class="math notranslate nohighlight">\(r\)</span>-space chunks. Normally, the <span class="math notranslate nohighlight">\(r\)</span>-space chunks (see <code class="docutils literal notranslate"><span class="pre">RChunks</span></code> below) should be provided in an increasing order, i.e., from low-<span class="math notranslate nohighlight">\(r\)</span> to high-<span class="math notranslate nohighlight">\(r\)</span>. Accordingly, the <code class="docutils literal notranslate"><span class="pre">QMax</span></code> values here should be given in a decreasing order. The length should be matching that of the <code class="docutils literal notranslate"><span class="pre">RChunks</span></code> entry.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RChunks</span></code></p>
<blockquote>
<div><p>Mandatory</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list of numbers</p>
</div></blockquote>
<p>Specification of the <span class="math notranslate nohighlight">\(r\)</span>-space chunking for the data processing. Normally, we are expecting that the <span class="math notranslate nohighlight">\(r\)</span>-space chunks should be provided in an increasing order, i.e., from low-<span class="math notranslate nohighlight">\(r\)</span> to high-<span class="math notranslate nohighlight">\(r\)</span>.</p>
<blockquote>
<div><p>The first chunk will always go from <span class="math notranslate nohighlight">\(0\)</span> to the first entry in the list.</p>
</div></blockquote>
<blockquote>
<div><p>The ending point of the last chunk will always be internally calculated to be <span class="math notranslate nohighlight">\(\pi/\Delta Q\)</span> (where <span class="math notranslate nohighlight">\(\Delta Q\)</span> refers to the bin size in <span class="math notranslate nohighlight">\(Q\)</span>-space), according to the Nyquist-Shannon sampling theorem. <code class="docutils literal notranslate"><span class="pre">However,</span> <span class="pre">the</span> <span class="pre">ending</span> <span class="pre">point</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">last</span> <span class="pre">chunk,</span> <span class="pre">e.g.,</span> <span class="pre">'314.0'</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">example</span> <span class="pre">given</span> <span class="pre">above,</span> <span class="pre">should</span> <span class="pre">still</span> <span class="pre">be</span> <span class="pre">provided,</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">informative</span> <span class="pre">purpose</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">QSpaceOutputForm</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">S(Q)</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A string</p>
</div></blockquote>
<p>The form of the <span class="math notranslate nohighlight">\(Q\)</span>-space outpout data. Acceptable values are <code class="docutils literal notranslate"><span class="pre">S(Q)</span></code>, <code class="docutils literal notranslate"><span class="pre">F(Q)</span></code> and <code class="docutils literal notranslate"><span class="pre">FK(Q)</span></code>. Refer to the <code class="docutils literal notranslate"><span class="pre">pystog</span></code> documentation <a class="reference external" href="https://pystog.readthedocs.io/en/latest/pystog/converter.html">here</a> for details about those forms.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">RSpaceOutputForm</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">g(r)</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A string</p>
</div></blockquote>
<p>The form of the <span class="math notranslate nohighlight">\(r\)</span>-space outpout data. Acceptable values are <code class="docutils literal notranslate"><span class="pre">g(r)</span></code>, <code class="docutils literal notranslate"><span class="pre">G(r)</span></code> and <code class="docutils literal notranslate"><span class="pre">GK(r)</span></code>. Refer to the <code class="docutils literal notranslate"><span class="pre">pystog</span></code> documentation <a class="reference external" href="https://pystog.readthedocs.io/en/latest/pystog/converter.html">here</a> for details about those forms.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LowRInspectRegion</span></code></p>
<blockquote>
<div><p>Optional</p>
</div></blockquote>
<blockquote>
<div><p>Form: A list</p>
</div></blockquote>
<blockquote>
<div><p>Example: “LowRInspectRegion”: [[0, 6], [-2, 1]]</p>
</div></blockquote>
<p>For the interactive determination of the lower and upper limit in the low-<span class="math notranslate nohighlight">\(r\)</span> region for the scaling purpose, we need to plot the <span class="math notranslate nohighlight">\(g(r)-1\)</span> data and focus on the low-<span class="math notranslate nohighlight">\(r\)</span> region. The parameter here is for specifying the plotting range to save the efforts of zooming on the user side. The first entry in the list gives the lower and upper limit for the <code class="docutils literal notranslate"><span class="pre">x</span></code>-axis while the second entry is for the <code class="docutils literal notranslate"><span class="pre">y</span></code>-axis.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Interactive</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A boolean</p>
</div></blockquote>
<p>Specify whether or not to run the program interactivel, in which parameters including <code class="docutils literal notranslate"><span class="pre">RCutoff</span></code>, <code class="docutils literal notranslate"><span class="pre">RMinScaling</span></code> and <code class="docutils literal notranslate"><span class="pre">RMinScaling</span></code> will be ignored. They will be read in from the command line prompt. Meanwhile, plots will be generated interactively during the program running. So, the interactive mode is not suitable for running a series of files.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Diagnostic</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A boolean</p>
</div></blockquote>
<p>Specify whether or not to generate diagnostic data and plots. In case of <code class="docutils literal notranslate"><span class="pre">true</span></code>, the chunk-by-chunk <span class="math notranslate nohighlight">\(r\)</span>-space data and their corresponding Fourier transform in <span class="math notranslate nohighlight">\(Q\)</span>-space will be output to files and presented with plots.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DebugMode</span></code></p>
<blockquote>
<div><p>Optional, default to <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</div></blockquote>
<blockquote>
<div><p>Form: A boolean</p>
</div></blockquote>
<p>Specify whether or not to run the program in the debug mode. In case of <code class="docutils literal notranslate"><span class="pre">true</span></code>, the program will print out detailed information while encountering errors. Otherwise, only brief information will be presented in case of error.</p>
</li>
</ul>
<p>Output files will be generated for the processed data in both real and reciprocal space. A typical list of output files will be,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_ff_fkofq</span><span class="o">.</span><span class="n">png</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_ff_fkofq</span><span class="o">.</span><span class="n">sq</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_ff_gkofr</span><span class="o">.</span><span class="n">gr</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_ff_gkofr</span><span class="o">.</span><span class="n">png</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_gofr_parts</span><span class="o">.</span><span class="n">gr</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_gofr_parts</span><span class="o">.</span><span class="n">png</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_sofq_parts</span><span class="o">.</span><span class="n">png</span>
<span class="o">&lt;</span><span class="n">output_stem</span><span class="o">&gt;</span><span class="n">_cbyc_sofq_parts</span><span class="o">.</span><span class="n">sq</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;output_stem&gt;</span></code> refers to the value provided with <code class="docutils literal notranslate"><span class="pre">OutputStem</span></code> for each of the files being processed. <code class="docutils literal notranslate"><span class="pre">&lt;output_stem&gt;_cbyc_ff_fkofq.sq</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;output_stem&gt;_cbyc_ff_fkofq.sq</span></code> are the output <span class="math notranslate nohighlight">\(Q\)</span>- and <span class="math notranslate nohighlight">\(r\)</span>-space data, respectively. The <code class="docutils literal notranslate"><span class="pre">_fkofq</span></code> and <code class="docutils literal notranslate"><span class="pre">_gkofr</span></code> part in the file names varies according to the parameters specified with <code class="docutils literal notranslate"><span class="pre">QSpaceOutputForm</span></code> and <code class="docutils literal notranslate"><span class="pre">RSpaceOutputForm</span></code>, respectively, according to the list below,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="p">(</span><span class="n">r</span><span class="p">):</span> <span class="s1">&#39;_gofr&#39;</span>
<span class="n">G</span><span class="p">(</span><span class="n">r</span><span class="p">):</span> <span class="s1">&#39;_pdf&#39;</span>
<span class="n">GK</span><span class="p">():</span> <span class="s1">&#39;_gkofr&#39;</span>
<span class="n">S</span><span class="p">(</span><span class="n">Q</span><span class="p">):</span> <span class="s1">&#39;_sofq&#39;</span>
<span class="n">F</span><span class="p">(</span><span class="n">Q</span><span class="p">):</span> <span class="s1">&#39;_fofq&#39;</span>
<span class="n">FK</span><span class="p">(</span><span class="n">Q</span><span class="p">):</span> <span class="s1">&#39;_fkofq&#39;</span>
</pre></div>
</div>
<p>Those files with <code class="docutils literal notranslate"><span class="pre">_parts</span></code> in their names correspond to the diagnostic data generated for the chunk-by-chunk Fourier transform.</p>
</li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "Kvieta1990/ornl-pd",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./data_tools"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="hb2c.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">HB-2C (WAND^2)</p>
      </div>
    </a>
    <a class="right-next"
       href="services.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">System Services</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yuanpeng Zhang & the Powder Diffraction Group at ORNL
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>